import { extractColorFromSvgContent } from '../extractColorFromSvgContent';

type UnitTest = {
  svgContents: string;
  expected: string;
};

const svgFolder = 'build-uitls/css/colorSvgs';
const fileName = 'Blue100.svg';

const testCases: UnitTest[] = [
  {
    svgContents: `<svg width="342" height="40" viewBox="0 0 342 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="341.333" height="40" fill="#E8EBFC"/>
    <path d="M13.1186 25V14.8182H16.8473C17.5698 14.8182 18.1681 14.9375 18.642 15.1761C19.116 15.4115 19.4706 15.7313 19.706 16.1357C19.9413 16.5367 20.0589 16.9891 20.0589 17.4929C20.0589 17.9171 19.9811 18.2751 19.8253 18.5668C19.6695 18.8551 19.4607 19.0871 19.1989 19.2628C18.9403 19.4351 18.6553 19.5611 18.3438 19.6406V19.7401C18.6818 19.7566 19.0116 19.866 19.3331 20.0682C19.6579 20.267 19.9264 20.5504 20.1385 20.9183C20.3506 21.2862 20.4567 21.7337 20.4567 22.2607C20.4567 22.781 20.334 23.2483 20.0888 23.6626C19.8468 24.0736 19.4723 24.4001 18.9652 24.642C18.4581 24.8807 17.8101 25 17.0213 25H13.1186ZM14.6548 23.6825H16.8722C17.608 23.6825 18.1349 23.54 18.4531 23.255C18.7713 22.9699 18.9304 22.6136 18.9304 22.1861C18.9304 21.8646 18.8492 21.5696 18.6868 21.3011C18.5244 21.0327 18.2924 20.8189 17.9908 20.6598C17.6925 20.5007 17.3378 20.4212 16.9268 20.4212H14.6548V23.6825ZM14.6548 19.223H16.7131C17.0578 19.223 17.3677 19.1567 17.6428 19.0241C17.9212 18.8916 18.1416 18.706 18.304 18.4673C18.4697 18.2254 18.5526 17.9403 18.5526 17.6122C18.5526 17.1913 18.4051 16.8383 18.1101 16.5533C17.8151 16.2682 17.3627 16.1257 16.7528 16.1257H14.6548V19.223ZM23.646 14.8182V25H22.1594V14.8182H23.646ZM30.4831 21.8331V17.3636H31.9746V25H30.513V23.6776H30.4334C30.2578 24.0852 29.976 24.425 29.5882 24.6967C29.2038 24.9652 28.7248 25.0994 28.1515 25.0994C27.6609 25.0994 27.2267 24.9917 26.8489 24.7763C26.4744 24.5575 26.1794 24.2344 25.964 23.8068C25.7518 23.3793 25.6458 22.8506 25.6458 22.2209V17.3636H27.1323V22.0419C27.1323 22.5623 27.2765 22.9766 27.5648 23.2848C27.8532 23.593 28.2277 23.7472 28.6884 23.7472C28.9668 23.7472 29.2435 23.6776 29.5186 23.5384C29.7971 23.3991 30.0274 23.1887 30.2097 22.907C30.3953 22.6252 30.4864 22.2673 30.4831 21.8331ZM37.2631 25.1541C36.5108 25.1541 35.8628 24.9934 35.3192 24.6719C34.779 24.3471 34.3614 23.8913 34.0664 23.3047C33.7747 22.7147 33.6289 22.0237 33.6289 21.2315C33.6289 20.4493 33.7747 19.7599 34.0664 19.1634C34.3614 18.5668 34.7724 18.1011 35.2994 17.7663C35.8297 17.4316 36.4495 17.2642 37.1587 17.2642C37.5896 17.2642 38.0072 17.3355 38.4116 17.478C38.8159 17.6205 39.1789 17.8442 39.5004 18.1491C39.8219 18.4541 40.0754 18.8501 40.261 19.3374C40.4466 19.8213 40.5394 20.4096 40.5394 21.1023V21.6293H34.4691V20.5156H39.0827C39.0827 20.1245 39.0032 19.7782 38.8441 19.4766C38.685 19.1716 38.4613 18.9313 38.1729 18.7557C37.8879 18.58 37.5531 18.4922 37.1687 18.4922C36.7511 18.4922 36.3865 18.5949 36.0749 18.8004C35.7667 19.0026 35.5281 19.2678 35.359 19.5959C35.1933 19.9207 35.1104 20.2737 35.1104 20.6548V21.5249C35.1104 22.0353 35.1999 22.4695 35.3789 22.8274C35.5612 23.1854 35.8147 23.4588 36.1396 23.6477C36.4644 23.8333 36.8439 23.9261 37.2781 23.9261C37.5598 23.9261 37.8166 23.8864 38.0487 23.8068C38.2807 23.724 38.4812 23.6013 38.6502 23.4389C38.8192 23.2765 38.9485 23.076 39.038 22.8374L40.445 23.0909C40.3323 23.5052 40.1301 23.8681 39.8384 24.1797C39.5501 24.4879 39.1871 24.7282 38.7496 24.9006C38.3155 25.0696 37.82 25.1541 37.2631 25.1541ZM46.0318 14.8182V25H44.4906V16.3594H44.4309L41.9949 17.9503V16.4787L44.5353 14.8182H46.0318ZM52.3308 25.169C51.5453 25.1657 50.8741 24.9586 50.3173 24.5476C49.7605 24.1366 49.3346 23.5384 49.0396 22.7528C48.7446 21.9673 48.5971 21.0211 48.5971 19.9141C48.5971 18.8104 48.7446 17.8674 49.0396 17.0852C49.3379 16.303 49.7654 15.7064 50.3223 15.2955C50.8824 14.8845 51.5519 14.679 52.3308 14.679C53.1097 14.679 53.7775 14.8861 54.3343 15.3004C54.8912 15.7114 55.3171 16.308 55.612 17.0902C55.9103 17.8691 56.0595 18.8104 56.0595 19.9141C56.0595 21.0244 55.912 21.9723 55.617 22.7578C55.322 23.54 54.8961 24.1383 54.3393 24.5526C53.7825 24.9635 53.113 25.169 52.3308 25.169ZM52.3308 23.8416C53.0202 23.8416 53.5588 23.5052 53.9466 22.8324C54.3377 22.1596 54.5332 21.1868 54.5332 19.9141C54.5332 19.0689 54.4437 18.3546 54.2647 17.7713C54.0891 17.1847 53.8355 16.7405 53.5041 16.4389C53.176 16.134 52.7849 15.9815 52.3308 15.9815C51.6447 15.9815 51.1061 16.3196 50.715 16.9957C50.3239 17.6719 50.1267 18.6446 50.1234 19.9141C50.1234 20.7625 50.2112 21.4801 50.3869 22.0668C50.5659 22.6501 50.8194 23.0926 51.1475 23.3942C51.4757 23.6925 51.8701 23.8416 52.3308 23.8416ZM61.3679 25.169C60.5824 25.1657 59.9112 24.9586 59.3544 24.5476C58.7976 24.1366 58.3717 23.5384 58.0767 22.7528C57.7817 21.9673 57.6342 21.0211 57.6342 19.9141C57.6342 18.8104 57.7817 17.8674 58.0767 17.0852C58.375 16.303 58.8026 15.7064 59.3594 15.2955C59.9195 14.8845 60.589 14.679 61.3679 14.679C62.1468 14.679 62.8146 14.8861 63.3714 15.3004C63.9283 15.7114 64.3542 16.308 64.6491 17.0902C64.9474 17.8691 65.0966 18.8104 65.0966 19.9141C65.0966 21.0244 64.9491 21.9723 64.6541 22.7578C64.3591 23.54 63.9332 24.1383 63.3764 24.5526C62.8196 24.9635 62.1501 25.169 61.3679 25.169ZM61.3679 23.8416C62.0573 23.8416 62.5959 23.5052 62.9837 22.8324C63.3748 22.1596 63.5703 21.1868 63.5703 19.9141C63.5703 19.0689 63.4808 18.3546 63.3018 17.7713C63.1262 17.1847 62.8726 16.7405 62.5412 16.4389C62.2131 16.134 61.822 15.9815 61.3679 15.9815C60.6818 15.9815 60.1432 16.3196 59.7521 16.9957C59.361 17.6719 59.1638 18.6446 59.1605 19.9141C59.1605 20.7625 59.2483 21.4801 59.424 22.0668C59.603 22.6501 59.8565 23.0926 60.1847 23.3942C60.5128 23.6925 60.9072 23.8416 61.3679 23.8416Z" fill="#0A0A0B"/>
    </svg>
    `,
    expected: '#E8EBFC',
  },
  {
    svgContents: 'TestCase300',
    expected:
      'No color found for color "build-uitls/css/colorSvgs/Blue100.svg". Please check the file again.',
  },
];

describe('Make sure extractColorFromSvgContent work properly', () => {
  test.each(testCases)(
    `Make sure to find color in the svg's fill and throw error if it occurs`,
    ({ svgContents, expected }) => {
      try {
        expect(
          extractColorFromSvgContent({
            content: svgContents,
            fileName,
            svgFolder,
          })
        ).toBe(expected);
      } catch (err) {
        if (err instanceof Error) {
          expect(err.message).toBe(expected);
        }
      }
    }
  );
});
